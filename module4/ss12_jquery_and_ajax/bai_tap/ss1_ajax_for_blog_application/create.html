<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns: lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
          crossorigin="anonymous">
</head>
<body>
<div class="container mt-4">
    <div class="row w-50 mx-auto">
        <div class="col-lg-12">
            <h2>Create Blog</h2>
            <div>
                <p style="color: red" id="pError"></p>
            </div>
            <div class="form-outline mb-4">
                <label class="form-label" for="inputTitle">Title</label>
                <input type="text" id="inputTitle" class="form-control"/>
            </div>

            <div class="form-outline mb-4">
                <label class="form-label" for="inputContent">Content</label>
                <input type="text" id="inputContent" class="form-control"/>
            </div>

            <div class="form-outline mb-4">
                <input type="date" id="inputDateOfBirth" class="form-control"/>
            </div>

            <select id="selectCategory" class="form-control mb-4">
                <option value="1">thoi su</option>
                <option value="2">trong ngay</option>
            </select>

            <a href="http://localhost:63342/ss1_ajax_for_blog_application/list.html?_ijt=mt0pflj3nmp1uatukguhcae5ce&_ij_reload#"
               id="btnCreate" class="btn btn-outline-success btn-lg" role="button">Create</a>
            <a href="http://localhost:63342/ss1_ajax_for_blog_application/list.html?_ijt=mt0pflj3nmp1uatukguhcae5ce&_ij_reload#"
               class="btn btn-outline-success btn-lg" role="button">Back</a>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script>
    $("#btnCreate").click(function () {
        let blogTitle = $("#inputTitle").val();
        let blogContent = $("#inputContent").val();
        let blogDOB = $("#inputDateOfBirth").val();
        let categoryId = $("#selectCategory").val();

        let blogObj = {
            title: blogTitle,
            content: blogContent,
            dateOfBirth: blogDOB,
            category: {
                id: categoryId
            }
        }

        $.ajax({
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            type: "POST", //GET, DELETE, PUT...
            url: "http://localhost:8080/blogRest/create",
            data: JSON.stringify(blogObj),
            success: function (resultSuccess) {
                console.log(resultSuccess);
            },
            error: function (resultError) {
                console.log('Co loi xay ra');
            }
        });

        console.log(blogObj);

    });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous">
</script>
</body>
</html>